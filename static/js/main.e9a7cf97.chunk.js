(this.webpackJsonpfarm=this.webpackJsonpfarm||[]).push([[0],{22:function(e,t,n){e.exports=n(46)},27:function(e,t,n){},28:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(12),c=n.n(a),s=(n(27),n(28),n(15)),l=n(3),i=n(8),d=n(5),u=n(4),m=n(6),p=function(e){for(var t=[],n=0;n<e;n++)t.push(n);return t},f=n(7),g=function(e){return{type:"trades.incrementmoney",payload:{sum:e}}},v=function(e){return{type:"trades.discrementmoney",payload:{sum:e}}},h=n(47),b=(n(34),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).onDragOverHandler=function(e){e.preventDefault()},n.deleteDrager=function(){(0,n.props.removeDrag)(n.state.mountedId),n.setState({droped:!1,buttonSatus:"hidden",cellClass:"cell empty"})},n.onDropHandler=function(e){var t=n.props,o=t.setCurrentId,r=t.setCell,a=e.dataTransfer.getData("id"),c=e.dataTransfer.getData("content");n.state.droped||(n.setState({mountedId:a,droped:!0,buttonSatus:"shown",cellClass:"cell ".concat(c)}),o(a),r(n.ref.current))},n.sold=function(){var e=n.props,t=e.getProfit,o=e.removeCell,r=e.cellToRemoveOn;t(500),o(n.props.ind),r()},n.state={droped:!1,mountedId:null,buttonSatus:"hidden",cellClass:"cell empty"},n.ref=r.a.createRef(),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.droped?null:r.a.createElement(h.a,{onClick:this.sold},"\u041f\u0440\u043e\u0434\u0430\u0442\u044c \u0437\u0435\u043c\u043b\u044e");return r.a.createElement("div",{className:this.state.cellClass,onDrop:this.onDropHandler,onDragOver:this.onDragOverHandler,ref:this.ref},r.a.createElement(h.a,{onClick:this.deleteDrager,className:this.state.buttonSatus},"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c, \u0432\u043f\u0438\u0437\u0434\u0443"),e)}}]),t}(r.a.Component)),y={setCurrentId:function(e){return{type:"gameobjects.setCurrentId",payload:{drugId:e}}},setCell:function(e){return{type:"gameobjects.setCell",payload:{cell:e}}},removeDrag:function(e){return{type:"gameobjects.removeDrag",payload:{idToRemove:e}}},getProfit:g,removeCell:function(e){return{type:"gameobjects.removeCell",payload:{cellToRemoveInd:e}}},cellToRemoveOn:function(){return{type:"gameobjects.removeDrag",payload:{cellToRemove:!0}}}},j=Object(f.b)((function(e){return{chickCount:e.dragged.chickens,ryeCount:e.dragged.rye}}),y)(b),O=(n(35),n(14)),C=n.n(O),k=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).buyCell=function(){if(n.props.cash>999){var e=C()(),t=n.props,o=t.addCell;(0,t.spend)(1e3),n.cells=[].concat(Object(s.a)(n.cells),[r.a.createElement(j,{key:e,ind:e})]),o(),n.props.noCellsToAdd()}},n.cells=p(n.props.cellCount).map((function(e,t){return r.a.createElement(j,{key:t,ind:t})})),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return this.props.cellToRemove&&(this.cells=this.cells.filter((function(t){return t.props.ind!==e.props.cellToRemoveInd}))),this.props.cellToRemoveOff(),r.a.createElement("div",{className:"field"},this.cells,r.a.createElement(h.a,{onClick:this.buyCell,className:"buyLand"},"\u0410 \u043d\u0435 \u043f\u0440\u0438\u043a\u0443\u043f\u0438\u0442\u044c \u043b\u0438 \u043c\u043d\u0435 \u0437\u0435\u043c\u043b\u0438?"))}}]),t}(r.a.Component),E={addCell:function(){return{type:"gameobjects.addCell",payload:{cellToAdd:!0}}},spend:v,cellToRemoveOff:function(){return{type:"gameobjects.removeDrag",payload:{cellToRemove:!1,cellToRemoveInd:null}}},noCellsToAdd:function(){return{type:"gameobjects.noCellsToAdd",payload:{cellToAdd:!1}}}},w=Object(f.b)((function(e){return{cellCount:e.gameObjects.cellCount,cellToRemove:e.gameObjects.cellToRemove,cellToRemoveInd:e.gameObjects.cellToRemoveInd,cellToAdd:e.gameObjects.cellToAdd,cash:e.trades.money}}),E)(k),T=(n(37),n(38),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).declarate=function(){(0,n.props.spend)(.12*n.props.money),n.timeSeconds=(new Date).getSeconds(),n.timeMinutes=(new Date).getMinutes();var e=(n.timeSeconds-n.prevTimeSeconds)/60,t=(n.timeMinutes-n.prevTimeMinutes+e).toFixed(2);n.setState({profitPerTime:(n.props.money-n.state.money)/t}),n.setState({money:n.props.money}),n.prevTimeSeconds=n.timeSeconds,n.prevTimeMinutes=n.timeMinutes},n.timeSeconds=null,n.timeMinutes=null,n.prevTimeSeconds=(new Date).getSeconds(),n.prevTimeMinutes=(new Date).getMinutes(),n.best=0,n.max=n.props.money,n.state={profitPerTime:0,money:1200,best:0},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){this.best=this.best>this.state.profitPerTime?this.best:this.state.profitPerTime.toFixed(2),this.max=this.max>this.props.money?this.max:this.props.money;var e=this.props.money>0?"green val":"red val";return r.a.createElement("div",{className:"value"},"\u0413\u043e\u043b\u0434\u0430: ",r.a.createElement("span",{className:e},this.props.money),r.a.createElement("div",{className:"statistic"},r.a.createElement("div",{className:"max"},"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u0439 \u0431\u0430\u043b\u0430\u043d\u0441: ",this.max),r.a.createElement("div",{className:"profit"},"\u0417\u0430\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043e\\\u043c\u0438\u043d: ",this.state.profitPerTime.toFixed(2)),r.a.createElement("div",{className:"best"},"\u043b\u0443\u0447\u0448\u0438\u0439 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0435\u043b\u044c: ",this.best),r.a.createElement(h.a,{className:"btnDeclr",onClick:this.declarate},"\u0414\u0435\u043a\u043b\u0430\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c")))}}]),t}(r.a.Component)),R={spend:v},S=Object(f.b)((function(e){return{money:e.trades.money}}),R)(T),D=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=0,t=["\u041c\u0443\u0445\u0440\u044e","\u0427\u0438\u043a\u0435\u043d\u044b","\u0420\u043e\u0448","\u0415\u0434\u0430","\u0412\u0441\u0435\u0433\u043e \u0438\u043a","\u041d\u0430\u0434\u043e\u0439"],n=[];for(var o in this.props)if("dispatch"!==o){var a=this.props[o]>0?"val green":"val red";n.push(r.a.createElement("div",{className:"value",key:e},t[e],": ",r.a.createElement("span",{className:a},this.props[o]))),e++}return n=[].concat(Object(s.a)(n),[r.a.createElement(S,{key:"goldmine"})]),r.a.createElement("div",{className:"infolist"},n)}}]),t}(r.a.Component),I=Object(f.b)((function(e){return{cowCount:e.dragged.cow,chickCount:e.dragged.chickens,ryeCount:e.dragged.rye,food:e.generators.food,eggs:e.generators.eggs,milk:e.generators.milk}}))(D),N=(n(39),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).removeController=function(){var e=n.props.getProfit;n.removeControllerInterval=setInterval((function(){n.props.idToRemove===n.id&&(n.id=C()(),n.container=n.homeContainer,n.setState({dragged:!1,product:0,status:n.status}),clearInterval(n.interval,n.removeControllerInterval),e(n.sellPrice),n.removeMethod())}))},n.deal=function(){(0,n.props.spend)(n.cost)},n.onStart=function(e){e.dataTransfer.setData("id",n.id),e.dataTransfer.setData("content","".concat(n.props.name,"_inside"))},n.onDragEndHandler=function(){n.props.id!==n.id||n.state.dragged||(n.deal(),n.setState({dragged:!0,status:"dragged dragged_".concat(n.props.name)}),n.container=n.props.cell,n.removeController(),n.method(),n.generator())},n.harvest=function(){n.props.harvester(n.state.product),n.setState({product:0})},n.homeContainer=document.createElement("div"),document.querySelector("body").appendChild(n.homeContainer),n.container=n.homeContainer,n.id=C()(),n.method=null,n.removeMethod=null,n.state={dragged:!1},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.dealOpportunity()?"visible":"none",t="".concat(this.props.name," ").concat(this.state.status," household ").concat(e),n=this.state.dragged?this.props.product:"",o=this.state.dragged?this.state.product:"",a=r.a.createElement("div",{className:t,draggable:!this.state.dragged,onDragStart:this.onStart,onDragEnd:this.onDragEndHandler},r.a.createElement("div",null,n," ",this.state.controlElements,o));return c.a.createPortal(a,this.container)}}]),t}(r.a.Component)),M=(n(40),function(){return{type:"generators.feed"}}),A=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).dealOpportunity=function(){return!(n.props.money<n.cost)},n.generator=function(){n.interval=setInterval((function(){n.state.food>0&&(console.log("state",n.props.state),n.setState((function(e){return{food:e.food-1,product:e.product+1}})))}),1e4)},n.takeAfood=function(){n.props.feed(),n.setState((function(e){return{food:e.food+3}}))},n.feed=function(){n.props.commonFood>0?n.takeAfood():alert("not enought food")},n.method=n.props.addChick,n.removeMethod=n.props.removeChick,n.status="wait_for_drag wait_for_drag-".concat(n.props.name),n.state={controlElements:[r.a.createElement(h.a,{key:n.props.ind,className:"btn-info feed",onClick:n.feed},"\u041f\u043e\u043a\u043e\u0440\u043c\u0438\u0446"),r.a.createElement(h.a,{key:n.props.ind+"i",className:"btn-info harvest",onClick:n.harvest},"\u0421\u043e\u0431\u0440\u0430\u0442\u044c")],status:n.status,product:0,food:0},n.cost=90,n.sellPrice=40,n}return Object(m.a)(t,e),t}(N),P={addChick:function(){return{type:"dragged.addChicken"}},removeChick:function(){return{type:"dragged.removeChicken"}},feed:M,harvester:function(e){return{type:"generators.putEggs",payload:{count:e}}},spend:v,getProfit:g},_=Object(f.b)((function(e){return{id:e.gameObjects.drugId,cell:e.gameObjects.cell,idToRemove:e.gameObjects.idToRemove,commonFood:e.generators.food,money:e.trades.money}}),P)(A),x=(n(41),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).dealOpportunity=function(){return!(n.props.money<n.cost)},n.generator=function(){n.interval=setInterval((function(){n.state.food>0&&n.setState((function(e){return{food:e.food-1,product:e.product+1}})),console.log(n.state.food)}),2e4)},n.takeAfood=function(){n.props.feed(),n.setState((function(e){return{food:e.food+1}}))},n.feed=function(){n.props.commonFood>0?n.takeAfood():alert("not enought food")},n.method=n.props.addCow,n.removeMethod=n.props.removeCow,n.status="wait_for_drag wait_for_drag-".concat(n.props.name),n.state={controlElements:[r.a.createElement(h.a,{key:n.props.ind,className:"btn-info feed",onClick:n.feed},"\u041f\u043e\u043a\u043e\u0440\u043c\u0438\u0446"),r.a.createElement(h.a,{key:n.props.ind+"i",className:"btn-info harvest",onClick:n.harvest},"\u0421\u043e\u0431\u0440\u0430\u0442\u044c")],status:n.status,product:0,food:0},n.cost=300,n.sellPrice=100,n}return Object(m.a)(t,e),t}(N)),W={addCow:function(e){return{type:"dragged.addCow",payload:{cows:e}}},removeCow:function(e){return{type:"dragged.removeCow"}},feed:M,harvester:function(e){return{type:"generators.milkCow",payload:{count:e}}},spend:v,getProfit:g},F=Object(f.b)((function(e){return{id:e.gameObjects.drugId,cell:e.gameObjects.cell,idToRemove:e.gameObjects.idToRemove,commonFood:e.generators.food,money:e.trades.money}}),W)(x),H=(n(42),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).dealOpportunity=function(){return!(n.props.money<n.cost)},n.generator=function(){n.interval=setInterval((function(){0===n.state.product&&n.setState({product:1})}),1e4)},n.method=n.props.addRye,n.removeMethod=n.props.removeRye,n.status="wait_for_drag-".concat(n.props.name," "),n.state={controlElements:[r.a.createElement(h.a,{key:n.props.ind,className:"btn-info",onClick:n.harvest},"\u041f\u043e\u0436\u0430\u0442\u044c")],status:n.status,product:0},n.cost=400,n.sellPrice=0,n}return Object(m.a)(t,e),t}(N)),B={addRye:function(){return{type:"dragged.addRye"}},removeRye:function(){return{type:"dragged.removeRye"}},harvester:function(e){return{type:"generators.harvester",payload:{count:e}}},spend:v,getProfit:g},L=Object(f.b)((function(e){return{id:e.gameObjects.drugId,cell:e.gameObjects.cell,idToRemove:e.gameObjects.idToRemove,money:e.trades.money}}),B)(H),U=(n(43),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).soldEggs=function(){var e=n.props,t=e.resetEggs,o=e.sell;t(),o(6*n.props.eggs)},n.soldMilk=function(){var e=n.props,t=e.resetMilk;(0,e.sell)(15*n.props.milk),t()},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"sellBtn_wrapper"},r.a.createElement(h.a,{className:"sellBtn btnEggs",onClick:this.soldEggs},"\u041f\u0440\u043e\u0434\u0430\u0442\u044c \u0438\u043a\u0438 "),r.a.createElement(h.a,{className:"sellBtn btnMilk",onClick:this.soldMilk},"\u041f\u0440\u043e\u0434\u0430\u0442\u044c \u043c\u043e\u043b\u043e\u043a\u043e"))}}]),t}(r.a.Component)),J={resetEggs:function(){return{type:"generators.resetEggs"}},resetMilk:function(){return{type:"generators.resetMilk"}},sell:g},q=Object(f.b)((function(e){return{money:e.trades.money,eggs:e.generators.eggs,milk:e.generators.milk}}),J)(U),$=(n(44),function(){return r.a.createElement("div",{className:"curs"},r.a.createElement("div",null,"\u041a\u0443\u0440\u0441 \u043d\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"),r.a.createElement("div",null,"\u0418\u043a\u043e \u043a\u0443\u043f\u0438\u0442\u044c:10 \u0435\u0434\\ \u043f\u0440\u043e\u0434\u0430\u0442\u044c: 6 \u0435\u0434"),r.a.createElement("div",null,"\u041c\u043e\u043b\u043e\u043a\u043e \u043a\u0443\u043f\u0438\u0442\u044c:20 \u0435\u0434\\ \u043f\u0440\u043e\u0434\u0430\u0442\u044c: 15 \u0435\u0434"),r.a.createElement("div",null,"\u041a\u0443\u0440\u043e\u0447\u043a\u0438 \u043a\u0443\u043f\u0438\u0442\u044c:90 \u0435\u0434\\ \u043f\u0440\u043e\u0434\u0430\u0442\u044c: 40 \u0435\u0434"),r.a.createElement("div",null,"\u041a\u043e\u0440\u043e\u0432\u043a\u0430 \u043a\u0443\u043f\u0438\u0442\u044c: 300 \u0435\u0434\\ \u043f\u0440\u043e\u0434\u0430\u0442\u044c: 100 \u0435\u0434"),r.a.createElement("div",null,"\u0417\u0435\u043c\u043b\u044f \u043a\u0443\u043f\u0438\u0442\u044c: 1000 \u0435\u0434\\ \u043f\u0440\u043e\u0434\u0430\u0442\u044c 500 \u0435\u0434"),r.a.createElement("div",null,"\u0420\u043e\u0448 \u043a\u0443\u043f\u0438\u0442\u044c:400 \u0435\u0434"))}),z=function(e){function t(e){return Object(l.a)(this,t),Object(d.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=p(64).map((function(e,t){return r.a.createElement(_,{key:t,ind:t,name:"chicken",product:"\u0418\u043a\u0438"})})),t=p(64).map((function(e,t){return r.a.createElement(L,{key:t,ind:t,name:"rye",product:"\u041f\u0438\u0448\u0448\u0430"})})),n=p(64).map((function(e,t){return r.a.createElement(F,{key:t,ind:t,name:"cow",product:"\u041c\u0438\u043b\u043a"})}));return r.a.createElement("div",null,e,t,n,r.a.createElement($,null),r.a.createElement(q,null))}}]),t}(r.a.Component),G=function(){return r.a.createElement("div",null,r.a.createElement(w,null),r.a.createElement(I,null),r.a.createElement(z,null))};var K=function(){return r.a.createElement(G,null)},Q=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function V(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var X=n(13),Y=n(2),Z={gameObjects:{cellCount:9,cellToRemove:!1,cellToAdd:!1,cellToRemoveInd:null,drugId:null,cell:null,position:null},resurses:{money:1200},dragged:{chickens:0,rye:0,cow:0},generators:{eggs:0,milk:0,food:0}},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z.dragged,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"dragged.addChicken":var n=e.chickens,o={chickens:++n};return Object(Y.a)({},e,{},o);case"dragged.addCow":var r=e.cow,a={cow:++r};return Object(Y.a)({},e,{},a);case"dragged.addRye":var c=e.rye,s={rye:++c};return Object(Y.a)({},e,{},s);case"dragged.removeChicken":var l=e.chickens,i={chickens:--l};return Object(Y.a)({},e,{},i);case"dragged.removeCow":var d=e.cow,u={cow:--d};return Object(Y.a)({},e,{},u);case"dragged.removeRye":var m=e.rye,p={rye:--m};return Object(Y.a)({},e,{},p);default:return e}},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z.generators,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"generators.harvester":var n=e.food,o={food:n+=t.payload.count};return Object(Y.a)({},e,{},o);case"generators.feed":var r=e.food,a={food:--r};return Object(Y.a)({},e,{},a);case"generators.putEggs":var c=e.eggs,s={eggs:c+=t.payload.count};return Object(Y.a)({},e,{},s);case"generators.milkCow":var l=e.milk,i={milk:l+=t.payload.count};return Object(Y.a)({},e,{},i);case"generators.resetEggs":var d={eggs:0};return Object(Y.a)({},e,{},d);case"generators.resetMilk":var u={milk:0};return Object(Y.a)({},e,{},u);default:return e}},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z.gameObjects,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"gameobjects.setCurrentId":case"gameobjects.removeDrag":case"gameobjects.setCell":case"gameobjects.addCell":case"gameobjects.removeCell":case"gameobjects.cellToRemoveOn":case"gameobjects.cellToRemoveOff":case"gameobjects.noCellsToAdd":return Object(Y.a)({},e,{},t.payload);default:return e}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z.resurses,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"trades.incrementmoney":var n=e.money,o={money:n+=t.payload.sum};return Object(Y.a)({state:e},o);case"trades.discrementmoney":var r=e.money,a={money:r-=t.payload.sum};return Object(Y.a)({state:e},a);default:return e}},re=(n(45),Object(X.c)(Object(X.b)({dragged:ee,generators:te,gameObjects:ne,trades:oe})));re.subscribe((function(){return console.log("change")})),c.a.render(r.a.createElement(f.a,{store:re},r.a.createElement(K,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Q?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):V(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):V(t,e)}))}}()}},[[22,1,2]]]);
//# sourceMappingURL=main.e9a7cf97.chunk.js.map