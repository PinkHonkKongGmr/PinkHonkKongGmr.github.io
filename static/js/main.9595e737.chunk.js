(this.webpackJsonpfarm=this.webpackJsonpfarm||[]).push([[0],{21:function(e,t,n){e.exports=n(42)},26:function(e,t,n){},27:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(11),c=n.n(a),s=(n(26),n(27),n(2)),i=n(9),d=n(4),u=n(3),l=n(5),f=function(e){for(var t=[],n=0;n<e;n++)t.push(n);return t},g=n(7),p=n(44),m=(n(33),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).onDragOverHandler=function(e){e.preventDefault()},n.deleteDrager=function(){(0,n.props.removeDrag)(n.state.mountedId),n.setState({droped:!1,buttonSatus:"hidden",cellClass:"cell empty"})},n.onDropHandler=function(e){var t=n.props,r=t.setCurrentId,o=t.setCell,a=e.dataTransfer.getData("id"),c=e.dataTransfer.getData("content");n.state.droped||(n.setState({mountedId:a,droped:!0,buttonSatus:"shown",cellClass:"cell ".concat(c)}),r(a),o(n.ref.current))},n.state={droped:!1,mountedId:null,buttonSatus:"hidden",cellClass:"cell empty"},n.ref=o.a.createRef(),n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:this.state.cellClass,onDrop:this.onDropHandler,onDragOver:this.onDragOverHandler,ref:this.ref},o.a.createElement(p.a,{onClick:this.deleteDrager,className:this.state.buttonSatus},"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c, \u0432\u043f\u0438\u0437\u0434\u0443"))}}]),t}(o.a.Component)),h={setCurrentId:function(e){return{type:"gameobjects.setCurrentId",payload:{drugId:e}}},setCell:function(e){return{type:"gameobjects.setCell",payload:{cell:e}}},removeDrag:function(e){return{type:"gameobjects.removeDrag",payload:{idToRemove:e}}}},v=Object(g.b)((function(e){return{chickCount:e.dragged.chickens,ryeCount:e.dragged.rye}}),h)(m),b=(n(34),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=f(this.props.count).map((function(e,t){return o.a.createElement(v,{key:t})}));return o.a.createElement("div",{className:"field"},e)}}]),t}(o.a.Component)),j=(n(35),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=0,t=["\u041c\u0443\u0445\u0440\u044e","\u0427\u0438\u043a\u0435\u043d\u044b","\u0420\u043e\u0448","\u0415\u0434\u0430","\u0412\u0441\u0435\u0433\u043e \u0438\u043a","\u041d\u0430\u0434\u043e\u0439"],n=[];for(var r in this.props)if("dispatch"!==r){var a=this.props[r]>0?"val green":"val red";n.push(o.a.createElement("div",{className:"value",key:e},t[e],": ",o.a.createElement("span",{className:a},this.props[r]))),e++}return o.a.createElement("div",null,n)}}]),t}(o.a.Component)),y=Object(g.b)((function(e){return{cowCount:e.dragged.cow,chickCount:e.dragged.chickens,ryeCount:e.dragged.rye,food:e.generators.food,eggs:e.generators.eggs,milk:e.generators.milk}}))(j),O=n(17),k=n.n(O),C=(n(37),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).removeController=function(){n.removeControllerInterval=setInterval((function(){n.props.idToRemove===n.id&&(n.id=k()(),n.container=n.homeContainer,n.setState({dragged:!1,product:0,status:n.status}),clearInterval(n.interval,n.removeControllerInterval),n.removeMethod())}))},n.onStart=function(e){e.dataTransfer.setData("id",n.id),e.dataTransfer.setData("content","".concat(n.props.name,"_inside"))},n.onDragEndHandler=function(){n.props.id!==n.id||n.state.dragged||(n.setState({dragged:!0,status:"dragged dragged_".concat(n.props.name)}),n.container=n.props.cell,n.removeController(),n.method(),n.generator())},n.harvest=function(){n.props.harvester(n.state.product),n.setState({product:0})},n.homeContainer=document.createElement("div"),document.querySelector("body").appendChild(n.homeContainer),n.container=n.homeContainer,n.id=k()(),n.method=null,n.removeMethod=null,n.state={dragged:!1},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e="".concat(this.props.name," ").concat(this.state.status," household"),t=this.state.dragged?this.props.product:"",n=this.state.dragged?this.state.product:"",r=o.a.createElement("div",{className:e,draggable:!this.state.dragged,onDragStart:this.onStart,onDragEnd:this.onDragEndHandler},o.a.createElement("div",null,t," ",this.state.controlElements,n));return c.a.createPortal(r,this.container)}}]),t}(o.a.Component)),w=(n(38),function(){return{type:"generators.feed"}}),E=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).generator=function(){n.interval=setInterval((function(){n.state.food>0&&n.setState((function(e){return{food:e.food-1,product:e.product+1}})),console.log(n.state.food)}),1e4)},n.takeAfood=function(){n.props.feed(),n.setState((function(e){return{food:e.food+3}}))},n.feed=function(){n.props.commonFood>0?n.takeAfood():alert("not enought food")},n.method=n.props.addChick,n.removeMethod=n.props.removeChick,n.status="wait_for_drag wait_for_drag-".concat(n.props.name),n.state={controlElements:[o.a.createElement(p.a,{key:n.props.ind,className:"btn-info feed",onClick:n.feed},"\u041f\u043e\u043a\u043e\u0440\u043c\u0438\u0446"),o.a.createElement(p.a,{key:n.props.ind+"i",className:"btn-info harvest",onClick:n.harvest},"\u0421\u043e\u0431\u0440\u0430\u0442\u044c")],status:n.status,product:0,food:0},n}return Object(l.a)(t,e),t}(C),S={addChick:function(){return{type:"dragged.addChicken"}},removeChick:function(){return{type:"dragged.removeChicken"}},feed:w,harvester:function(e){return{type:"generators.putEggs",payload:{count:e}}}},D=Object(g.b)((function(e){return{id:e.gameObjects.drugId,cell:e.gameObjects.cell,idToRemove:e.gameObjects.idToRemove,commonFood:e.generators.food}}),S)(E),I=(n(39),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).generator=function(){n.interval=setInterval((function(){n.state.food>0&&n.setState((function(e){return{food:e.food-1,product:e.product+1}})),console.log(n.state.food)}),2e4)},n.takeAfood=function(){n.props.feed(),n.setState((function(e){return{food:e.food+1}}))},n.feed=function(){n.props.commonFood>0?n.takeAfood():alert("not enought food")},n.method=n.props.addCow,n.removeMethod=n.props.removeCow,n.status="wait_for_drag wait_for_drag-".concat(n.props.name),n.state={controlElements:[o.a.createElement(p.a,{key:n.props.ind,className:"btn-info feed",onClick:n.feed},"\u041f\u043e\u043a\u043e\u0440\u043c\u0438\u0446"),o.a.createElement(p.a,{key:n.props.ind+"i",className:"btn-info harvest",onClick:n.harvest},"\u0421\u043e\u0431\u0440\u0430\u0442\u044c")],status:n.status,product:0,food:0},n}return Object(l.a)(t,e),t}(C)),R={addCow:function(e){return{type:"dragged.addCow",payload:{cows:e}}},removeCow:function(e){return{type:"dragged.removeCow"}},feed:w,harvester:function(e){return{type:"generators.milkCow",payload:{count:e}}}},T=Object(g.b)((function(e){return{id:e.gameObjects.drugId,cell:e.gameObjects.cell,idToRemove:e.gameObjects.idToRemove,commonFood:e.generators.food}}),R)(I),N=(n(40),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).generator=function(){n.interval=setInterval((function(){0===n.state.product&&n.setState({product:1})}),1e4)},n.method=n.props.addRye,n.removeMethod=n.props.removeRye,n.status="wait_for_drag-".concat(n.props.name," "),n.state={controlElements:[o.a.createElement(p.a,{key:n.props.ind,className:"btn-info",onClick:n.harvest},"\u041f\u043e\u0436\u0430\u0442\u044c")],status:n.status,product:0},n}return Object(l.a)(t,e),t}(C)),_={addRye:function(){return{type:"dragged.addRye"}},removeRye:function(){return{type:"dragged.removeRye"}},harvester:function(e){return{type:"generators.harvester",payload:{count:e}}}},A=Object(g.b)((function(e){return{id:e.gameObjects.drugId,cell:e.gameObjects.cell,idToRemove:e.gameObjects.idToRemove}}),_)(N),W=function(e){function t(e){return Object(s.a)(this,t),Object(d.a)(this,Object(u.a)(t).call(this,e))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=f(64).map((function(e,t){return o.a.createElement(D,{key:t,ind:t,name:"chicken",product:"\u0418\u043a\u0438"})})),t=f(64).map((function(e,t){return o.a.createElement(A,{key:t,ind:t,name:"rye",product:"\u041f\u0438\u0448\u0448\u0430"})})),n=f(64).map((function(e,t){return o.a.createElement(T,{key:t,ind:t,name:"cow",product:"\u041c\u0438\u043b\u043a"})}));return o.a.createElement("div",null,e,t,n)}}]),t}(o.a.Component),H=function(){return o.a.createElement("div",null,o.a.createElement(b,{count:9}),o.a.createElement(y,null),o.a.createElement(W,null))};var M=function(){return o.a.createElement(H,null)},F=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function P(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var U=n(12),x=n(6),B={gameObjects:{drugId:null,cell:null,position:null},money:200,dragged:{chickens:0,rye:0,cow:0},generators:{eggs:0,milk:0,food:0}},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B.dragged,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"dragged.addChicken":var n=e.chickens,r={chickens:++n};return Object(x.a)({},e,{},r);case"dragged.addCow":var o=e.cow,a={cow:++o};return Object(x.a)({},e,{},a);case"dragged.addRye":var c=e.rye,s={rye:++c};return Object(x.a)({},e,{},s);case"dragged.removeChicken":var i=e.chickens,d={chickens:--i};return Object(x.a)({},e,{},d);case"dragged.removeCow":var u=e.cow,l={cow:--u};return Object(x.a)({},e,{},l);case"dragged.removeRye":var f=e.rye,g={rye:--f};return Object(x.a)({},e,{},g);default:return e}},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B.generators,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"generators.harvester":var n=e.food,r={food:n+=t.payload.count};return Object(x.a)({},e,{},r);case"generators.feed":var o=e.food,a={food:--o};return Object(x.a)({},e,{},a);case"generators.putEggs":var c=e.eggs,s={eggs:c+=t.payload.count};return Object(x.a)({},e,{},s);case"generators.milkCow":var i=e.milk,d={milk:i+=t.payload.count};return Object(x.a)({},e,{},d);default:return e}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B.gameObjects,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"gameobjects.setCurrentId":case"gameobjects.removeDrag":case"gameobjects.setCell":return Object(x.a)({},e,{},t.payload);default:return e}},$=(n(41),Object(U.c)(Object(U.b)({dragged:J,generators:L,gameObjects:q})));$.subscribe((function(){return console.log("change")})),c.a.render(o.a.createElement(g.a,{store:$},o.a.createElement(M,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");F?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):P(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):P(t,e)}))}}()}},[[21,1,2]]]);
//# sourceMappingURL=main.9595e737.chunk.js.map